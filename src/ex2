from scapy.all import *

def packet_callback(packet):
    ls(packet)  # Print a summary of each packet

sniff(filter="tcp", count=10, prn=packet_callback)  # Capture 10 TCP packets

packets = sniff(count=10) # the packets can also be stored in memory
wrpcap("captured_packets.pcap", packets) # then saved as a pcap